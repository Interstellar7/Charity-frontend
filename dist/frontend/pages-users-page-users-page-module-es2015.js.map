{"version":3,"sources":["./src/app/features/users/guards/users-page.guard.ts","./src/app/pages/users-page/pages/user-list-page/user-list-page.component.ts","./src/app/pages/users-page/pages/user-list-page/user-list-page.component.html","./src/app/pages/users-page/pages/user-view-page/user-view-page.component.ts","./src/app/pages/users-page/pages/user-view-page/user-view-page.component.html","./src/app/pages/users-page/users-page-routing.module.ts","./src/app/pages/users-page/users-page.module.ts"],"names":[],"mappings":"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","file":"pages-users-page-users-page-module-es2015.js","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\nimport {CurrentUserService} from \"../../../core/services/current-user.service\";\r\nimport {Role} from \"../../../core/models/current-user.model\";\r\nimport {map} from \"rxjs/operators\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UsersPageGuard implements CanActivate {\r\n\r\n  constructor(private currentUserService: CurrentUserService, private router: Router) {\r\n  }\r\n\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return this.currentUserService.hasRole(Role.ADMIN).pipe(\r\n      map(can => {\r\n        if (can) {\r\n          return true;\r\n        }\r\n        return this.router.createUrlTree(['/']);\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import {Component, OnChanges, OnInit, SimpleChanges} from '@angular/core';\r\nimport {UserModel} from \"../../../../features/users/models/user.model\";\r\nimport {combineLatest, Observable, ReplaySubject} from \"rxjs\";\r\nimport {UserService} from \"../../../../features/users/services/user.service\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {UserCreateDialogComponent} from \"../../../../features/users/components/user-create-dialog/user-create-dialog.component\";\r\nimport {map, switchMap} from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: 'app-users-page',\r\n  templateUrl: './user-list-page.component.html',\r\n  styleUrls: ['./user-list-page.component.css']\r\n})\r\nexport class UserListPageComponent implements OnInit {\r\n\r\n  users?: UserModel[];\r\n\r\n  selectedUser?: UserModel;\r\n\r\n  users$!: Observable<UserModel[]>;\r\n\r\n  private refresh$ = new ReplaySubject<void>(1);\r\n\r\n  constructor(private userService: UserService, private dialogService: MatDialog) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.users$ = combineLatest([this.refresh$]).pipe(\r\n      switchMap(() => this.userService.getUsers())\r\n    );\r\n    this.refreshUsers();\r\n  }\r\n\r\n  refreshUsers() {\r\n    this.refresh$.next();\r\n  }\r\n\r\n  clickCreateUser() {\r\n    this.dialogService.open(UserCreateDialogComponent)\r\n      .afterClosed()\r\n      .subscribe(() => {\r\n        this.refreshUsers();\r\n      });\r\n  }\r\n}\r\n","<div class=\"page-header\">\r\n    <h1>User list</h1>\r\n    <div class=\"fill\"></div>\r\n    <button mat-raised-button color=\"primary\" (click)=\"clickCreateUser()\">+ Create user</button>\r\n</div>\r\n\r\n<app-users-table [users]=\"users$ | async\"\r\n                 [(selectedUser)]=\"selectedUser\"\r\n                  (refresh)=\"refreshUsers()\">\r\n</app-users-table>\r\n","import {Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-users-page',\r\n  templateUrl: './user-view-page.component.html',\r\n  styleUrls: ['./user-view-page.component.css']\r\n})\r\nexport class UserViewPageComponent implements OnInit {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<h1>User view</h1>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {UserListPageComponent} from \"./pages/user-list-page/user-list-page.component\";\r\nimport {UserViewPageComponent} from \"./pages/user-view-page/user-view-page.component\";\r\nimport {UsersPageGuard} from \"../../features/users/guards/users-page.guard\";\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    canActivate: [UsersPageGuard],\r\n    children: [\r\n      {\r\n        path: '',\r\n        pathMatch: 'full',\r\n        component: UserListPageComponent\r\n      },\r\n      {\r\n        path: ':id',\r\n        component: UserViewPageComponent\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UsersPageRoutingModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {UsersPageRoutingModule} from './users-page-routing.module';\r\nimport {UserViewPageComponent} from './pages/user-view-page/user-view-page.component';\r\nimport {UserListPageComponent} from \"./pages/user-list-page/user-list-page.component\";\r\nimport {UsersModule} from \"../../features/users/users.module\";\r\nimport {MatButtonModule} from \"@angular/material/button\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UserListPageComponent,\r\n    UserViewPageComponent\r\n  ],\r\n    imports: [\r\n        CommonModule,\r\n        UsersPageRoutingModule,\r\n        UsersModule,\r\n        MatButtonModule\r\n    ]\r\n})\r\nexport class UsersPageModule {\r\n}\r\n"],"sourceRoot":"webpack:///"}